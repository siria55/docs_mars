
# 火星探险 Agent 设计

本文件定义第 10 课「火星探险」的教学逻辑与 Agent 设定。目标是通过多阶段任务，让学员理解 **workflow -> 单 Agent -> 多 Agent** 的协作过渡。

## 课程背景

### 前置课程
- **讲解为主**：第 1 课 AI 是什么、第 2 课 神经网络
- **讲解 + 小游戏**：第 3 课 提示词（是什么）、第 4 课 提示词（怎么写好）、第 5 课 工具调用、第 6 课 RAG
- **讲解 + 大游戏**：第 7 课 workflow、第 8 课 单 Agent、第 9 课 多 Agent

### 第 10 课：火星探险
- 串联第 7–9 课的内容，最终场景：人类向火星派遣机器人，从单 Agent 到多 Agent，完成探索、建设与协作。

## 场景目标
- 展示从 workflow 到单 Agent 过渡到多 Agent 的过程。
- 引导学员在任务中 **规划指令、分配资源、处理突发事件**。
- 理解 workflow 思维与智能体协作机制。

## 关键阶段

### 任务阶段与场景映射表
| 阶段 | 主要 Agent | 核心任务 | 预期学习效果 |
|------|------------|----------|--------------|
| 地面筹备 | Earth Control Agent | 规划任务流程、分配初始资源 | 理解 workflow 设计思维 |
| 火星着陆 | Mars Rover Agent | 地图探索、样本采集、基地建设 | 体验单 Agent 执行复杂任务 |
| 自我复制 | Fabricator Agent | 读取蓝图、制造协作机器人 | 理解 Agent 扩展机制 |
| 多 Agent 协同 | 所有 Agent | 资源调度、协作建设、应急响应 | 掌握多 Agent 协作模式 |

### 详细阶段说明
1. **地面筹备（Briefing）**：地球指挥中心规划任务与资源装载。
2. **火星着陆（MarsSurface）**：探索机器人执行单 Agent 勘测任务。
3. **自我复制（Replication）**：解锁制造模块，生成协作机器人。
4. **多 Agent 协同（Colony）**：协作解决资源调度、环境挑战。

#### 阶段 1：地面筹备

- 从需求到流程：把任务拆成「目标→子任务→资源→顺序」
- 体会 workflow 的可视化（DAG/泳道图/看板）

主要动作

- 规划：把目标拆成 Task
- 打包：选择「上行载荷清单」：电池(×n)、太阳板(×n)、建材(×n)、备件(×n)

产出/检查点

- 输出 MissionPlan（JSON）：任务 DAG、优先级、容错策略
- 输出 CargoManifest（JSON）：资源清单 + 质量约束（例如总质量 ≤ 100）

解锁

- 解锁火星表面行动；根据清单决定着陆后的可建造项

#### 阶段 2：火星着陆

- 体验单 Agent 如何在不依赖同伴的情况下完成复杂任务
- 感知「观察→计划→执行→回传」闭环

输入

- 未知地图（雾面板），地形障碍（岩石、沟壑），若干潜在样本点
- 天气/环境：低温、昼夜周期、沙尘概率按回合变化

主要动作

- Scan(area)：消耗 3E，揭开 5×5 格
- Move(path)：每格 1E，复杂地形额外 +1E
- Sample(type)：3E + 1 回合，概率获得样本（岩屑/冰/含盐土）
- Build(structure)：建临时能量站（花 10M、0 回合安装，次回合起每回合 +5E）
- Transmit(data)：占用带宽 B

产出/检查点

- 抵达目标区域并成功采集 3 类样本
- 在安全区建成临时能量站 1 座
- 回传第一版表面地图与样本报告

解锁

- 当回传的数据含「制造蓝图」触发阶段 3

#### 阶段 3：自我复制

- 阶段二的 Agent 升级为：Fabricator
- 让学生理解Agent 扩展机制：通过制造与蓝图，使系统能力跃迁
- 引入「角色分工」概念与工具复用

输入

- 已解锁的「制造蓝图」：HelperBot（轻型运输） / BuilderBot（建造强化）
- 资源限制：材料 M、电量 E、制造时长 T
- 产线配置：Fabricator 每回合最多产出 1 台，失败概率 5%

主要动作

- ReadBlueprint(spec)：校验兼容性与依赖
- Fabricate(type)：消耗 15M/台，2 回合
- Calibrate(agentId)：1 回合，建立基础指令集与安全约束
- Assign(role)：将新 Agent 绑定到任务泳道

产出/检查点

- 产出至少 1 台 HelperBot（搬运补给）或 BuilderBot（建造效率 ×2）
- 新 Agent 完成校准并加入通信网络

解锁

- 解锁多 Agent 协同

#### 阶段 4: 多 Agent 协同

- 资源调度、任务并行、冲突检测、应急响应
- 形成协作协议（交接点/优先级/互斥区）

输入

- 目标升级：搭建基础栖息舱(需要 40M、2 回合、Builder 加成)、铺设电网、建立气象中继
- 事件库：中等沙尘暴、带宽降级、温差致电池衰减、路径被岩石堵塞

主要动作（多 Agent 配合）

- ResourceManager.Schedule(tasks)：生成时隙/资源表，避免互斥
- Rover/Builder/Helper 各自执行，并通过 handoff() 在「交接点」传递物资或数据
- EnvironmentGuardian.Monitor()：广播预警

产出/检查点

- 在 T 回合内完成：栖息舱 + 电网 + 气象中继
- 所有关键任务至少有 1 条替代路径
- 输出「协作日志」与「复盘报告」


## 核心 Agent 列表

### 地面指挥官（Earth Control Agent）
  - 能力：整合任务目标、生成工作流、下发指令、监控遥测。

### 火星探索机器人（Mars Rover Agent）
  - 能力：地图探索、建造初级基地、采集样本

### 自我复制工厂（Fabricator Agent）
  - 能力：读取蓝图、制造新 Agent。

### 资源调度单元（Resource Manager Agent）
  - 能力：资源库存管理、任务排程、冲突检测

### 火星环境守护（Environment Guardian Agent）
  - 能力：检测环境事件、广播预警。

## 评估与复盘（给第 10 课收尾）

- 计划质量：DAG 完整、关键路径识别、PlanB 覆盖率
- 执行效率：每目标的 E/M/B 单位成本、关键路径时长
- 遇到事件的恢复时间（回合）、任务掉线率

可做全服排行